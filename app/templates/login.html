<script>
// ===== Particles (enhanced with lines) =====
const pCanvas = document.getElementById("particles");
const pctx = pCanvas.getContext("2d");

let pw, ph;
function resizeParticles(){
    pw = pCanvas.width = innerWidth;
    ph = pCanvas.height = innerHeight;
}
resizeParticles();
addEventListener("resize", resizeParticles);

const particles = Array.from({length: 70}, () => ({
    x: Math.random()*pw,
    y: Math.random()*ph,
    r: Math.random()*2 + 1.2,   // أكبر شوية
    dx: (Math.random()-.5)*0.35,
    dy: (Math.random()-.5)*0.35
}));

function drawParticles(){
    pctx.clearRect(0,0,pw,ph);

    // رسم البارتكلز
    particles.forEach(p=>{
        p.x += p.dx;
        p.y += p.dy;

        if(p.x < 0 || p.x > pw) p.dx *= -1;
        if(p.y < 0 || p.y > ph) p.dy *= -1;

        pctx.beginPath();
        pctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        pctx.fillStyle = "rgba(120,170,255,0.45)"; // أوضح
        pctx.fill();
    });

    // رسم الخطوط بينهم
    for(let i=0;i<particles.length;i++){
        for(let j=i+1;j<particles.length;j++){
            const a = particles[i];
            const b = particles[j];
            const dx = a.x - b.x;
            const dy = a.y - b.y;
            const dist = Math.sqrt(dx*dx + dy*dy);

            if(dist < 130){ // مدى الاتصال
                pctx.strokeStyle = `rgba(120,170,255,${0.12 - dist/130 * 0.12})`;
                pctx.lineWidth = 1;
                pctx.beginPath();
                pctx.moveTo(a.x, a.y);
                pctx.lineTo(b.x, b.y);
                pctx.stroke();
            }
        }
    }

    requestAnimationFrame(drawParticles);
}
drawParticles();
</script>
