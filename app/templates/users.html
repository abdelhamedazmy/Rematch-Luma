{% extends "base.html" %}
{% block content %}

<h1>Users Management</h1>

<div class="card">
<form method="post" action="/users/create" style="display:flex;gap:10px;flex-wrap:wrap;">
    <input name="username" placeholder="Username" required>
    <input name="password" placeholder="Password" required>
    <select name="role">
        <option value="viewer">Viewer</option>
        <option value="admin">Admin</option>
    </select>
    <button class="button">Create</button>
</form>
</div>

<div class="card">
<table class="pro-table">
<thead>
<tr>
    <th>ID</th>
    <th>Username</th>
    <th>Role</th>
    <th>Actions</th>
</tr>
</thead>

<tbody>
{% for u in users %}
<tr>
    <td>{{ u.id }}</td>
    <td>{{ u.username }}</td>

    <td>
        {% if u.role == "admin" %}
            <span class="badge red">Admin</span>
        {% else %}
            <span class="badge blue">Viewer</span>
        {% endif %}
    </td>

    <td style="display:flex;gap:8px;">
        <a href="/users/toggle_role/{{ u.id }}"
           class="button">
           Toggle
        </a>

        <a href="/users/delete/{{ u.id }}"
           class="button"
           onclick="return confirm('Delete this user?')">
           Delete
        </a>
    </td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

{% endblock %}
